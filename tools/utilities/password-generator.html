<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éšæœºå¯†ç ç”Ÿæˆå™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 30px;
            padding: 25px;
            border-radius: 15px;
            background: #f8f9fa;
            border-left: 4px solid #4facfe;
        }

        .section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .form-group input[type="number"],
        .form-group input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #4facfe;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .checkbox-group input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .checkbox-group label {
            margin-bottom: 0;
            cursor: pointer;
        }

        .button {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-right: 15px;
            margin-bottom: 15px;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(79, 172, 254, 0.3);
        }

        .button.secondary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .password-display {
            background: #2c3e50;
            color: #00ff88;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            text-align: center;
            margin: 20px 0;
            word-break: break-all;
            position: relative;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .copy-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .strength-meter {
            margin: 20px 0;
        }

        .strength-bar {
            height: 8px;
            background: #e1e5e9;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .strength-fill {
            height: 100%;
            transition: width 0.3s, background-color 0.3s;
            border-radius: 4px;
        }

        .strength-text {
            font-size: 14px;
            color: #666;
            text-align: center;
        }

        .strength-weak { background: #ff4757; }
        .strength-medium { background: #ffa502; }
        .strength-strong { background: #2ed573; }
        .strength-very-strong { background: #1e90ff; }

        .history {
            max-height: 200px;
            overflow-y: auto;
        }

        .history-item {
            background: white;
            padding: 10px;
            margin: 5px 0;
            border-radius: 8px;
            border-left: 3px solid #4facfe;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }

        .rules-info {
            background: #e8f4fd;
            border: 1px solid #b3d9ff;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .rules-info h4 {
            color: #0066cc;
            margin-bottom: 10px;
        }

        .rules-info ul {
            margin-left: 20px;
            color: #555;
        }

        .rules-info li {
            margin-bottom: 5px;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .content {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ” éšæœºå¯†ç ç”Ÿæˆå™¨</h1>
            <p>ç”Ÿæˆå®‰å…¨ã€å¤æ‚çš„éšæœºå¯†ç ï¼Œæ”¯æŒè‡ªå®šä¹‰è§„åˆ™å’Œå¤æ‚åº¦è¯„ä¼°</p>
        </div>

        <div class="content">
            <!-- å¯†ç ç”Ÿæˆé…ç½® -->
            <div class="section">
                <h3>ğŸ“‹ å¯†ç é…ç½®</h3>
                <div class="form-group">
                    <label for="passwordLength">å¯†ç é•¿åº¦:</label>
                    <input type="number" id="passwordLength" value="16" min="4" max="128">
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="useUppercase" checked>
                    <label for="useUppercase">åŒ…å«å¤§å†™å­—æ¯ (A-Z)</label>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="useLowercase" checked>
                    <label for="useLowercase">åŒ…å«å°å†™å­—æ¯ (a-z)</label>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="useNumbers" checked>
                    <label for="useNumbers">åŒ…å«æ•°å­— (0-9)</label>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="useSymbols" checked>
                    <label for="useSymbols">åŒ…å«ç‰¹æ®Šç¬¦å· (!@#$%^&*)</label>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="excludeSimilar">
                    <label for="excludeSimilar">æ’é™¤ç›¸ä¼¼å­—ç¬¦ (0,O,1,I,l)</label>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="excludeAmbiguous">
                    <label for="excludeAmbiguous">æ’é™¤æ˜“æ··æ·†å­—ç¬¦ ({},[],(),/,\,|)</label>
                </div>

                <div class="form-group">
                    <label for="customChars">è‡ªå®šä¹‰å­—ç¬¦é›† (å¯é€‰):</label>
                    <input type="text" id="customChars" placeholder="è¾“å…¥è‡ªå®šä¹‰å­—ç¬¦ï¼Œå¦‚: ä¸­æ–‡ã€emojiç­‰">
                </div>

                <button class="button" onclick="generatePassword()">ğŸ² ç”Ÿæˆå¯†ç </button>
                <button class="button secondary" onclick="generateMultiple()">ğŸ“ æ‰¹é‡ç”Ÿæˆ</button>
                <button class="button secondary" onclick="clearHistory()">ğŸ—‘ï¸ æ¸…ç©ºå†å²</button>
            </div>

            <!-- ç”Ÿæˆçš„å¯†ç æ˜¾ç¤º -->
            <div class="section">
                <h3>ğŸ”‘ ç”Ÿæˆçš„å¯†ç </h3>
                <div id="passwordDisplay" class="password-display" style="display: none;">
                    <button class="copy-btn" onclick="copyPassword()">å¤åˆ¶</button>
                    <div id="passwordText"></div>
                </div>
                
                <div class="strength-meter">
                    <div class="strength-bar">
                        <div id="strengthFill" class="strength-fill"></div>
                    </div>
                    <div id="strengthText" class="strength-text"></div>
                </div>
            </div>

            <!-- å¯†ç å†å² -->
            <div class="section">
                <h3>ğŸ“š ç”Ÿæˆå†å²</h3>
                <div id="passwordHistory" class="history"></div>
            </div>

            <!-- è§„åˆ™è¯´æ˜ -->
            <div class="section">
                <h3>ğŸ“– ä½¿ç”¨è¯´æ˜</h3>
                <div class="rules-info">
                    <h4>å¯†ç å¤æ‚åº¦è¯„ä¼°æ ‡å‡†:</h4>
                    <ul>
                        <li><strong>å¼±å¯†ç :</strong> é•¿åº¦å°äº8ä½ï¼Œæˆ–åªåŒ…å«å•ä¸€å­—ç¬¦ç±»å‹</li>
                        <li><strong>ä¸­ç­‰å¯†ç :</strong> é•¿åº¦8-12ä½ï¼ŒåŒ…å«2-3ç§å­—ç¬¦ç±»å‹</li>
                        <li><strong>å¼ºå¯†ç :</strong> é•¿åº¦12-16ä½ï¼ŒåŒ…å«3-4ç§å­—ç¬¦ç±»å‹</li>
                        <li><strong>æå¼ºå¯†ç :</strong> é•¿åº¦16ä½ä»¥ä¸Šï¼ŒåŒ…å«æ‰€æœ‰å­—ç¬¦ç±»å‹</li>
                    </ul>
                    
                    <h4>å®‰å…¨å»ºè®®:</h4>
                    <ul>
                        <li>å»ºè®®å¯†ç é•¿åº¦è‡³å°‘12ä½</li>
                        <li>æ··åˆä½¿ç”¨å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šç¬¦å·</li>
                        <li>é¿å…ä½¿ç”¨ä¸ªäººä¿¡æ¯ï¼ˆç”Ÿæ—¥ã€å§“åç­‰ï¼‰</li>
                        <li>ä¸åŒè´¦æˆ·ä½¿ç”¨ä¸åŒå¯†ç </li>
                        <li>å®šæœŸæ›´æ¢å¯†ç </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        class PasswordGenerator {
            constructor() {
                this.uppercase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                this.lowercase = 'abcdefghijklmnopqrstuvwxyz';
                this.numbers = '0123456789';
                this.symbols = '!@#$%^&*()_+-=[]{}|;:,.<>?';
                this.similarChars = '0O1Il';
                this.ambiguousChars = '{}[]()/\\|';
                this.passwordHistory = [];
            }

            generatePassword(length, options) {
                let charset = '';
                let password = '';

                // æ„å»ºå­—ç¬¦é›†
                if (options.useUppercase) charset += this.uppercase;
                if (options.useLowercase) charset += this.lowercase;
                if (options.useNumbers) charset += this.numbers;
                if (options.useSymbols) charset += this.symbols;
                if (options.customChars) charset += options.customChars;

                // éªŒè¯å­—ç¬¦é›†
                if (charset.length === 0) {
                    throw new Error('è¯·è‡³å°‘é€‰æ‹©ä¸€ç§å­—ç¬¦ç±»å‹ï¼');
                }

                // æ’é™¤ç›¸ä¼¼å­—ç¬¦
                if (options.excludeSimilar) {
                    charset = charset.split('').filter(char => !this.similarChars.includes(char)).join('');
                }

                // æ’é™¤æ˜“æ··æ·†å­—ç¬¦
                if (options.excludeAmbiguous) {
                    charset = charset.split('').filter(char => !this.ambiguousChars.includes(char)).join('');
                }

                // ç¡®ä¿è‡³å°‘åŒ…å«æ¯ç§é€‰ä¸­çš„å­—ç¬¦ç±»å‹
                if (options.useUppercase) password += this.getRandomChar(this.uppercase);
                if (options.useLowercase) password += this.getRandomChar(this.lowercase);
                if (options.useNumbers) password += this.getRandomChar(this.numbers);
                if (options.useSymbols) password += this.getRandomChar(this.symbols);

                // å¡«å……å‰©ä½™é•¿åº¦
                const remainingLength = length - password.length;
                for (let i = 0; i < remainingLength; i++) {
                    password += this.getRandomChar(charset);
                }

                // æ‰“ä¹±å¯†ç å­—ç¬¦é¡ºåº
                return this.shuffleString(password);
            }

            getRandomChar(charset) {
                return charset.charAt(Math.floor(Math.random() * charset.length));
            }

            shuffleString(str) {
                const arr = str.split('');
                for (let i = arr.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [arr[i], arr[j]] = [arr[j], arr[i]];
                }
                return arr.join('');
            }

            evaluateStrength(password) {
                let score = 0;
                let feedback = [];

                // é•¿åº¦è¯„åˆ†
                if (password.length >= 16) score += 25;
                else if (password.length >= 12) score += 20;
                else if (password.length >= 8) score += 15;
                else score += 5;

                // å­—ç¬¦ç±»å‹å¤šæ ·æ€§è¯„åˆ†
                let charTypes = 0;
                if (/[A-Z]/.test(password)) charTypes++;
                if (/[a-z]/.test(password)) charTypes++;
                if (/[0-9]/.test(password)) charTypes++;
                if (/[^A-Za-z0-9]/.test(password)) charTypes++;

                score += charTypes * 15;

                // å¤æ‚åº¦è¯„åˆ†
                if (password.length >= 8 && charTypes >= 3) score += 20;
                if (password.length >= 12 && charTypes >= 4) score += 20;

                // éšæœºæ€§è¯„åˆ†ï¼ˆæ£€æŸ¥æ˜¯å¦æœ‰é‡å¤æ¨¡å¼ï¼‰
                const uniqueChars = new Set(password).size;
                score += Math.min(20, uniqueChars * 2);

                // ç¡®å®šå¼ºåº¦ç­‰çº§
                let strength, color, text;
                if (score >= 80) {
                    strength = 'very-strong';
                    color = '#1e90ff';
                    text = 'æå¼ºå¯†ç ';
                } else if (score >= 60) {
                    strength = 'strong';
                    color = '#2ed573';
                    text = 'å¼ºå¯†ç ';
                } else if (score >= 40) {
                    strength = 'medium';
                    color = '#ffa502';
                    text = 'ä¸­ç­‰å¯†ç ';
                } else {
                    strength = 'weak';
                    color = '#ff4757';
                    text = 'å¼±å¯†ç ';
                }

                return {
                    score,
                    strength,
                    color,
                    text,
                    feedback
                };
            }
        }

        const generator = new PasswordGenerator();

        function generatePassword() {
            try {
                const length = parseInt(document.getElementById('passwordLength').value);
                const options = {
                    useUppercase: document.getElementById('useUppercase').checked,
                    useLowercase: document.getElementById('useLowercase').checked,
                    useNumbers: document.getElementById('useNumbers').checked,
                    useSymbols: document.getElementById('useSymbols').checked,
                    excludeSimilar: document.getElementById('excludeSimilar').checked,
                    excludeAmbiguous: document.getElementById('excludeAmbiguous').checked,
                    customChars: document.getElementById('customChars').value
                };

                if (length < 4 || length > 128) {
                    alert('å¯†ç é•¿åº¦å¿…é¡»åœ¨4-128ä½ä¹‹é—´ï¼');
                    return;
                }

                const password = generator.generatePassword(length, options);
                const strength = generator.evaluateStrength(password);

                // æ˜¾ç¤ºå¯†ç 
                document.getElementById('passwordText').textContent = password;
                document.getElementById('passwordDisplay').style.display = 'block';

                // æ›´æ–°å¼ºåº¦æŒ‡ç¤ºå™¨
                document.getElementById('strengthFill').style.width = strength.score + '%';
                document.getElementById('strengthFill').style.backgroundColor = strength.color;
                document.getElementById('strengthText').textContent = `${strength.text} (${strength.score}åˆ†)`;

                // æ·»åŠ åˆ°å†å²è®°å½•
                addToHistory(password, strength);

            } catch (error) {
                alert(error.message);
            }
        }

        function generateMultiple() {
            const count = prompt('è¯·è¾“å…¥è¦ç”Ÿæˆçš„å¯†ç æ•°é‡ (1-10):', '5');
            const num = parseInt(count);
            
            if (isNaN(num) || num < 1 || num > 10) {
                alert('è¯·è¾“å…¥1-10ä¹‹é—´çš„æ•°å­—ï¼');
                return;
            }

            for (let i = 0; i < num; i++) {
                generatePassword();
            }
        }

        function addToHistory(password, strength) {
            const historyItem = {
                password,
                strength: strength.text,
                score: strength.score,
                timestamp: new Date().toLocaleString()
            };

            generator.passwordHistory.unshift(historyItem);
            
            // é™åˆ¶å†å²è®°å½•æ•°é‡
            if (generator.passwordHistory.length > 20) {
                generator.passwordHistory = generator.passwordHistory.slice(0, 20);
            }

            updateHistoryDisplay();
        }

        function updateHistoryDisplay() {
            const historyDiv = document.getElementById('passwordHistory');
            historyDiv.innerHTML = '';

            generator.passwordHistory.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'history-item';
                itemDiv.innerHTML = `
                    <div><strong>å¯†ç  ${index + 1}:</strong> ${item.password}</div>
                    <div style="font-size: 12px; color: #666;">
                        å¼ºåº¦: ${item.strength} (${item.score}åˆ†) | ç”Ÿæˆæ—¶é—´: ${item.timestamp}
                    </div>
                `;
                historyDiv.appendChild(itemDiv);
            });
        }

        function copyPassword() {
            const password = document.getElementById('passwordText').textContent;
            navigator.clipboard.writeText(password).then(() => {
                const btn = document.querySelector('.copy-btn');
                const originalText = btn.textContent;
                btn.textContent = 'å·²å¤åˆ¶!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            }).catch(() => {
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶å¯†ç ');
            });
        }

        function clearHistory() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å¯†ç å†å²è®°å½•å—ï¼Ÿ')) {
                generator.passwordHistory = [];
                updateHistoryDisplay();
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // è®¾ç½®é»˜è®¤å€¼
            document.getElementById('passwordLength').value = 16;
            
            // ç»‘å®šå›è½¦é”®ç”Ÿæˆå¯†ç 
            document.getElementById('passwordLength').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    generatePassword();
                }
            });
        });
    </script>
</body>
</html>